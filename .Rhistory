#install.packages("PerformanceAnalytics")
library(quantmod)
library(PerformanceAnalytics)
symbols <- c("AAPL", "MSFT", "TSLA")
getSymbols(symbols, src = "yahoo", from = "2019-01-01", to = "2024-12-31")
returns_aapl <- dailyReturn(Ad(AAPL))
returns_msft <- dailyReturn(Ad(MSFT))
returns_tsla <- dailyReturn(Ad(TSLA))
sd(returns_aapl)
sd(returns_msft)
sd(returns_tsla)
maxDrawdown(returns_aapl)
maxDrawdown(returns_msft)
maxDrawdown(returns_tsla)
SharpeRatio(returns_aapl, Rf = 0)
SharpeRatio(returns_msft, Rf = 0)
SharpeRatio(returns_tsla, Rf = 0)
VaR(returns_aapl, p = 0.95, method = "gaussian")
VaR(returns_msft, p = 0.95, method = "gaussian")
VaR(returns_tsla, p = 0.95, method = "gaussian")
returns_aapl <- dailyReturn(Ad(AAPL))
returns_msft <- dailyReturn(Ad(MSFT))
returns_tsla <- dailyReturn(Ad(TSLA))
cat("Standard Deviation of AAPL:", sd_aapl, "\n")
#install.packages("PerformanceAnalytics")
library(quantmod)
library(PerformanceAnalytics)
symbols <- c("AAPL", "MSFT", "TSLA")
getSymbols(symbols, src = "yahoo", from = "2019-01-01", to = "2024-12-31")
returns_aapl <- dailyReturn(Ad(AAPL))
returns_msft <- dailyReturn(Ad(MSFT))
returns_tsla <- dailyReturn(Ad(TSLA))
cat("Standard Deviation of AAPL:", sd_aapl, "\n")
returns_aapl <- dailyReturn(Ad(AAPL))
returns_msft <- dailyReturn(Ad(MSFT))
returns_tsla <- dailyReturn(Ad(TSLA))
cat("Standard Deviation of AAPL:", returns_aapl, "\n")
cat("Standard Deviation of MSFT:", returns_msft, "\n")
cat("Standard Deviation of TSLA:", returns_tsla, "\n")
# Calculate standard deviations
sd_aapl <- sd(returns_aapl)
sd_msft <- sd(returns_msft)
sd_tsla <- sd(returns_tsla)
# Print with labels
cat("Standard Deviation of AAPL:", sd_aapl, "\n")
cat("Standard Deviation of MSFT:", sd_msft, "\n")
cat("Standard Deviation of TSLA:", sd_tsla, "\n")
mdd_aapl <- maxDrawdown(returns_aapl)
mdd_msft <- maxDrawdown(returns_msft)
mdd_tsla <- maxDrawdown(returns_tsla)
cat("Maximum Drawdown of AAPL:", mdd_aapl, "\n")
cat("Maximum Drawdown of MSFT:", mdd_msft, "\n")
cat("Maximum Drawdown of TSLA:", mdd_tsla, "\n")
# Calculate Value at Risk (95%, Gaussian method)
var_aapl <- VaR(returns_aapl, p = 0.95, method = "gaussian")
var_msft <- VaR(returns_msft, p = 0.95, method = "gaussian")
var_tsla <- VaR(returns_tsla, p = 0.95, method = "gaussian")
# Print with labels
cat("95% VaR (Gaussian) of AAPL:", var_aapl, "\n")
cat("95% VaR (Gaussian) of MSFT:", var_msft, "\n")
cat("95% VaR (Gaussian) of TSLA:", var_tsla, "\n")
#install.packages("PerformanceAnalytics")
library(quantmod)
library(PerformanceAnalytics)
symbols <- c("AAPL", "MSFT", "TSLA")
getSymbols(symbols, src = "yahoo", from = "2019-01-01", to = "2024-12-31")
# Calculate standard deviations
sd_aapl <- sd(returns_aapl)
sd_msft <- sd(returns_msft)
sd_tsla <- sd(returns_tsla)
# Print with labels
cat("Standard Deviation of AAPL:", sd_aapl, "\n")
cat("Standard Deviation of MSFT:", sd_msft, "\n")
cat("Standard Deviation of TSLA:", sd_tsla, "\n")
mdd_aapl <- maxDrawdown(returns_aapl)
mdd_msft <- maxDrawdown(returns_msft)
mdd_tsla <- maxDrawdown(returns_tsla)
cat("Maximum Drawdown of AAPL:", mdd_aapl, "\n")
cat("Maximum Drawdown of MSFT:", mdd_msft, "\n")
cat("Maximum Drawdown of TSLA:", mdd_tsla, "\n")
SharpeRatio(returns_aapl, Rf = 0)
SharpeRatio(returns_msft, Rf = 0)
SharpeRatio(returns_tsla, Rf = 0)
# Calculate Value at Risk (95%, Gaussian method)
var_aapl <- VaR(returns_aapl, p = 0.95, method = "gaussian")
var_msft <- VaR(returns_msft, p = 0.95, method = "gaussian")
var_tsla <- VaR(returns_tsla, p = 0.95, method = "gaussian")
# Print with labels
cat("95% VaR (Gaussian) of AAPL:", var_aapl, "\n")
cat("95% VaR (Gaussian) of MSFT:", var_msft, "\n")
cat("95% VaR (Gaussian) of TSLA:", var_tsla, "\n")
sr_aapl <- SharpeRatio(returns_aapl, Rf = 0)
sr_msft <- SharpeRatio(returns_msft, Rf = 0)
sr_tsla <- SharpeRatio(returns_tsla, Rf = 0)
cat("Sharpe Ratio of AAPL:", sr_aapl, "\n")
cat("Sharpe Ratio of MSFT:", sr_msft, "\n")
cat("Sharpe Ratio of TSLA:", sr_tsla, "\n")
SharpeRatio(returns_aapl, Rf = 0)
SharpeRatio(returns_msft, Rf = 0)
SharpeRatio(returns_tsla, Rf = 0)
sr_aapl <- SharpeRatio(returns_aapl, Rf = 0)
sr_msft <- SharpeRatio(returns_msft, Rf = 0)
sr_tsla <- SharpeRatio(returns_tsla, Rf = 0)
cat("Sharpe Ratio of AAPL:", sr_aapl, "\n")
cat("Sharpe Ratio of MSFT:", sr_msft, "\n")
cat("Sharpe Ratio of TSLA:", sr_tsla, "\n")
SharpeRatio(returns_aapl, Rf = 0)
SharpeRatio(returns_msft, Rf = 0)
SharpeRatio(returns_tsla, Rf = 0)
VaR(returns_aapl, p = 0.95, method = "gaussian")
VaR(returns_msft, p = 0.95, method = "gaussian")
VaR(returns_tsla, p = 0.95, method = "gaussian")
# Получить данные S&P 500
getSymbols("^GSPC", src = "yahoo", from = "2019-01-01", to = "2024-12-31")
# Рассчитать доходности
returns_sp500 <- dailyReturn(Ad(GSPC))
# Функция для среднего дохода и риска
calc_metrics <- function(returns) {
c(mean = mean(returns), sd = sd(returns))
}
# Собрать метрики для всех активов
metrics <- rbind(
AAPL = calc_metrics(returns_aapl),
MSFT = calc_metrics(returns_msft),
TSLA = calc_metrics(returns_tsla),
SP500 = calc_metrics(returns_sp500)
)
# Построить график
plot(metrics[, "sd"], metrics[, "mean"],
xlab = "Risk (Standard Deviation)",
ylab = "Return (Mean Daily Return)",
main = "Risk-Return Comparison",
pch = 19, col = c("blue", "green", "red", "black"))
text(metrics[, "sd"], metrics[, "mean"], labels = rownames(metrics), pos = 4)
#install.packages("PerformanceAnalytics")
library(quantmod)
library(PerformanceAnalytics)
symbols <- c("AAPL", "MSFT", "TSLA")
getSymbols(symbols, src = "yahoo", from = "2019-01-01", to = "2024-12-31")
# Calculate standard deviations
sd_aapl <- sd(returns_aapl)
sd_msft <- sd(returns_msft)
sd_tsla <- sd(returns_tsla)
# Print with labels
cat("Standard Deviation of AAPL:", sd_aapl, "\n")
cat("Standard Deviation of MSFT:", sd_msft, "\n")
cat("Standard Deviation of TSLA:", sd_tsla, "\n")
mdd_aapl <- maxDrawdown(returns_aapl)
mdd_msft <- maxDrawdown(returns_msft)
mdd_tsla <- maxDrawdown(returns_tsla)
cat("Maximum Drawdown of AAPL:", mdd_aapl, "\n")
cat("Maximum Drawdown of MSFT:", mdd_msft, "\n")
cat("Maximum Drawdown of TSLA:", mdd_tsla, "\n")
SharpeRatio(returns_aapl, Rf = 0)
SharpeRatio(returns_msft, Rf = 0)
SharpeRatio(returns_tsla, Rf = 0)
# Calculate Value at Risk (95%, Gaussian method)
var_aapl <- VaR(returns_aapl, p = 0.95, method = "gaussian")
var_msft <- VaR(returns_msft, p = 0.95, method = "gaussian")
var_tsla <- VaR(returns_tsla, p = 0.95, method = "gaussian")
# Print with labels
cat("95% VaR (Gaussian) of AAPL:", var_aapl, "\n")
cat("95% VaR (Gaussian) of MSFT:", var_msft, "\n")
cat("95% VaR (Gaussian) of TSLA:", var_tsla, "\n")
#install.packages("PerformanceAnalytics")
library(quantmod)
library(PerformanceAnalytics)
symbols <- c("AAPL", "MSFT", "TSLA")
getSymbols(symbols, src = "yahoo", from = "2019-01-01", to = "2024-12-31")
# Calculate daily returns
returns_aapl <- dailyReturn(Ad(AAPL))
returns_msft <- dailyReturn(Ad(MSFT))
returns_tsla <- dailyReturn(Ad(TSLA))
# Calculate standard deviations
sd_aapl <- sd(returns_aapl)
sd_msft <- sd(returns_msft)
sd_tsla <- sd(returns_tsla)
# Print with labels
cat("Standard Deviation of AAPL:", sd_aapl, "\n")
cat("Standard Deviation of MSFT:", sd_msft, "\n")
cat("Standard Deviation of TSLA:", sd_tsla, "\n")
mdd_aapl <- maxDrawdown(returns_aapl)
mdd_msft <- maxDrawdown(returns_msft)
mdd_tsla <- maxDrawdown(returns_tsla)
cat("Maximum Drawdown of AAPL:", mdd_aapl, "\n")
cat("Maximum Drawdown of MSFT:", mdd_msft, "\n")
cat("Maximum Drawdown of TSLA:", mdd_tsla, "\n")
SharpeRatio(returns_aapl, Rf = 0)
SharpeRatio(returns_msft, Rf = 0)
SharpeRatio(returns_tsla, Rf = 0)
# Calculate Value at Risk (95%, Gaussian method)
var_aapl <- VaR(returns_aapl, p = 0.95, method = "gaussian")
var_msft <- VaR(returns_msft, p = 0.95, method = "gaussian")
var_tsla <- VaR(returns_tsla, p = 0.95, method = "gaussian")
# Print with labels
cat("95% VaR (Gaussian) of AAPL:", var_aapl, "\n")
cat("95% VaR (Gaussian) of MSFT:", var_msft, "\n")
cat("95% VaR (Gaussian) of TSLA:", var_tsla, "\n")
mean_return_aapl <- mean(returns_aapl)
mean_return_msft <- mean(returns_msft)
mean_return_tsla <- mean(returns_tsla)
cat("Average Return of Apple:", mean_return_aapl, "\n")
cat("Average Return of Microsoft:", mean_return_msft, "\n")
cat("Average Return of Tesla:", mean_return_tsla, "\n")
geo_mean_aapl <- prod(1 + returns_aapl)^(1 / length(returns_aapl)) - 1
geo_mean_msft <- prod(1 + returns_msft)^(1 / length(returns_msft)) - 1
geo_mean_tsla <- prod(1 + returns_tsla)^(1 / length(returns_tsla)) - 1
cat("Geometric Mean Return of Apple:", geo_mean_aapl, "\n")
cat("Geometric Mean Return of Microsoft:", geo_mean_msft, "\n")
cat("Geometric Mean Return of Tesla:", geo_mean_tsla, "\n")
cat("+-----------+------------------+------------------+\n")
cat("| Stock     | Arithmetic Mean   | Geometric Mean    |\n")
cat("+-----------+------------------+------------------+\n")
cat("| Apple     | 0.001448724       | 0.001260127       |\n")
cat("| Microsoft | 0.00115778        | 0.0009909139      |\n")
cat("| Tesla     | 0.002814698       | 0.001993475       |\n")
cat("+-----------+------------------+------------------+\n")
portfolio_returns <- (returns_aapl + returns_msft + returns_tsla) / 3
cat("Standard Deviation of AAPL:", sd(returns_aapl), "\n")
cat("Standard Deviation of MSFT:", sd(returns_msft), "\n")
cat("Standard Deviation of TSLA:", sd(returns_tsla), "\n")
cat("Standard Deviation of Diversified Portfolio:", sd(portfolio_returns), "\n")
# Portfolio already calculated as portfolio_returns
mean_portfolio <- mean(portfolio_returns)
sd_portfolio <- sd(portfolio_returns)
metrics <- data.frame(
Asset = c("Apple", "Microsoft", "Tesla", "Diversified Portfolio"),
Mean_Return = c(mean_return_aapl, mean_return_msft, mean_return_tsla, mean_portfolio),
Standard_Deviation = c(sd_aapl, sd_msft, sd_tsla, sd_portfolio)
)
print(metrics)
# График риск / доходность
plot(metrics$Standard_Deviation, metrics$Mean_Return,
xlab = "Risk (Standard Deviation)",
ylab = "Return (Mean Daily Return)",
main = "Risk-Return Comparison",
pch = 19, col = c("blue", "green", "red", "black"),
xlim = c(0, max(metrics$Standard_Deviation) * 1.1),
ylim = c(0, max(metrics$Mean_Return) * 1.1))
text(metrics$Standard_Deviation, metrics$Mean_Return, labels = metrics$Asset, pos = 4)
#install.packages("PerformanceAnalytics")
library(quantmod)
library(PerformanceAnalytics)
symbols <- c("AAPL", "MSFT", "TSLA")
getSymbols(symbols, src = "yahoo", from = "2019-01-01", to = "2024-12-31")
# Calculate daily returns
returns_aapl <- dailyReturn(Ad(AAPL))
returns_msft <- dailyReturn(Ad(MSFT))
returns_tsla <- dailyReturn(Ad(TSLA))
# Calculate standard deviations
sd_aapl <- sd(returns_aapl)
sd_msft <- sd(returns_msft)
sd_tsla <- sd(returns_tsla)
# Print with labels
cat("Standard Deviation of AAPL:", sd_aapl, "\n")
cat("Standard Deviation of MSFT:", sd_msft, "\n")
cat("Standard Deviation of TSLA:", sd_tsla, "\n")
mdd_aapl <- maxDrawdown(returns_aapl)
mdd_msft <- maxDrawdown(returns_msft)
mdd_tsla <- maxDrawdown(returns_tsla)
cat("Maximum Drawdown of AAPL:", mdd_aapl, "\n")
cat("Maximum Drawdown of MSFT:", mdd_msft, "\n")
cat("Maximum Drawdown of TSLA:", mdd_tsla, "\n")
SharpeRatio(returns_aapl, Rf = 0)
SharpeRatio(returns_msft, Rf = 0)
SharpeRatio(returns_tsla, Rf = 0)
# Calculate Value at Risk (95%, Gaussian method)
var_aapl <- VaR(returns_aapl, p = 0.95, method = "gaussian")
var_msft <- VaR(returns_msft, p = 0.95, method = "gaussian")
var_tsla <- VaR(returns_tsla, p = 0.95, method = "gaussian")
# Print with labels
cat("95% VaR (Gaussian) of AAPL:", var_aapl, "\n")
cat("95% VaR (Gaussian) of MSFT:", var_msft, "\n")
cat("95% VaR (Gaussian) of TSLA:", var_tsla, "\n")
mean_return_aapl <- mean(returns_aapl)
mean_return_msft <- mean(returns_msft)
mean_return_tsla <- mean(returns_tsla)
cat("Average Return of Apple:", mean_return_aapl, "\n")
cat("Average Return of Microsoft:", mean_return_msft, "\n")
cat("Average Return of Tesla:", mean_return_tsla, "\n")
geo_mean_aapl <- prod(1 + returns_aapl)^(1 / length(returns_aapl)) - 1
geo_mean_msft <- prod(1 + returns_msft)^(1 / length(returns_msft)) - 1
geo_mean_tsla <- prod(1 + returns_tsla)^(1 / length(returns_tsla)) - 1
cat("Geometric Mean Return of Apple:", geo_mean_aapl, "\n")
cat("Geometric Mean Return of Microsoft:", geo_mean_msft, "\n")
cat("Geometric Mean Return of Tesla:", geo_mean_tsla, "\n")
cat("+-----------+------------------+------------------+\n")
cat("| Stock     | Arithmetic Mean   | Geometric Mean    |\n")
cat("+-----------+------------------+------------------+\n")
cat("| Apple     | 0.001448724       | 0.001260127       |\n")
cat("| Microsoft | 0.00115778        | 0.0009909139      |\n")
cat("| Tesla     | 0.002814698       | 0.001993475       |\n")
cat("+-----------+------------------+------------------+\n")
portfolio_returns <- (returns_aapl + returns_msft + returns_tsla) / 3
cat("Standard Deviation of AAPL:", sd(returns_aapl), "\n")
cat("Standard Deviation of MSFT:", sd(returns_msft), "\n")
cat("Standard Deviation of TSLA:", sd(returns_tsla), "\n")
cat("Standard Deviation of Diversified Portfolio:", sd(portfolio_returns), "\n")
# Portfolio already calculated as portfolio_returns
mean_portfolio <- mean(portfolio_returns)
sd_portfolio <- sd(portfolio_returns)
metrics <- data.frame(
Asset = c("Apple", "Microsoft", "Tesla", "Diversified Portfolio"),
Mean_Return = c(mean_return_aapl, mean_return_msft, mean_return_tsla, mean_portfolio),
Standard_Deviation = c(sd_aapl, sd_msft, sd_tsla, sd_portfolio)
)
print(metrics)
# График риск / доходность
plot(metrics$Standard_Deviation, metrics$Mean_Return,
xlab = "Risk (Standard Deviation)",
ylab = "Return (Mean Daily Return)",
main = "Risk-Return Comparison",
pch = 19, col = c("blue", "green", "red", "black"),
xlim = c(0, max(metrics$Standard_Deviation) * 1.1),
ylim = c(0, max(metrics$Mean_Return) * 1.1))
text(metrics$Standard_Deviation, metrics$Mean_Return, labels = metrics$Asset, pos = 4)
t_test_result <- t.test(as.vector(returns_tsla), as.vector(returns_aapl))
print(t_test_result)
# Линейная регрессия доходности Tesla против доходности портфеля
regression_model <- lm(returns_tsla ~ portfolio_returns)
# Вывод результата
summary(regression_model)
